{% extends 'layouts/two_pane.html' %}

{% load humanize custom_tags %}

{% block back_link %}
	<a href="{% url 'users:users' %}" class="govuk-back-link">Back to Users</a>
{% endblock %}

{% block two_thirds %}

	<div class="lite-app-bar">
		<div class="lite-app-bar__content">
			<h2 class="govuk-heading-l">
				{% block title %}{{ data.user.first_name }} {{ data.user.last_name }}{% endblock %}
			</h2>
		</div>
		<div class="lite-app-bar__controls">
            {% if super_user %}
                <a href="{% url 'users:edit' data.user.id %}" type="submit" class="govuk-button">
                    {% lcs 'USER_PROFILE_PAGE_EDIT' %}
                </a>
            {% elif not data.user.role.name == 'Super User' %}
                <a href="{% url 'users:edit' data.user.id %}" type="submit" class="govuk-button">
                    {% lcs 'USER_PROFILE_PAGE_EDIT' %}
                </a>
            {% endif %}
            {% if not data.user.role.name == 'Super User' %}
                {% if request.user.lite_api_user_id|stringformat:"s" != data.user.id|stringformat:"s" %}
                    {% if data.user.status == 'Active' %}
                        <a href="{% url 'users:change_status' data.user.id 'deactivate' %}" role="button" draggable="false" class="govuk-button govuk-button--warning govuk-!-margin-right-2">
                            {% lcs 'USER_DEACTIVATE' %}
                        </a>
                    {% elif data.user.status == 'Deactivated' %}
                        <a href="{% url 'users:change_status' data.user.id 'reactivate' %}" role="button" draggable="false" class="govuk-button govuk-!-margin-right-2">
                            {% lcs 'USER_REACTIVATE' %}
                        </a>
                    {% endif %}
                {% endif %}
            {% endif %}
		</div>
	</div>

	<dl class="govuk-summary-list">
		<div class="govuk-summary-list__row">
			<dt class="govuk-summary-list__key">
				First Name
			</dt>
			<dd class="govuk-summary-list__value">
				{{ data.user.first_name }}
			</dd>
		</div>
		<div class="govuk-summary-list__row">
			<dt class="govuk-summary-list__key">
				Last Name
			</dt>
			<dd class="govuk-summary-list__value">
				{{ data.user.last_name }}
			</dd>
		</div>
		<div class="govuk-summary-list__row">
			<dt class="govuk-summary-list__key">
				Email
			</dt>
			<dd class="govuk-summary-list__value">
				{{ data.user.email }}
			</dd>
		</div>
		<div class="govuk-summary-list__row">
			<dt class="govuk-summary-list__key">
				Team
			</dt>
			<dd class="govuk-summary-list__value">
				<a href="{% url 'teams:team' data.user.team.id %}" class="govuk-link govuk-link--no-visited-state">{{ data.user.team.name }}</a>
			</dd>
		</div>
	</dl>

{% endblock %}
