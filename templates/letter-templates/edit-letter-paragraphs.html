{% extends 'layouts/base.html' %}

{% load static %}

{% block back_link %}
	<a href="{% url 'letter_templates:letter_template' letter_template.id %}" class="govuk-back-link">Back to {{ letter_template.name }}</a>
{% endblock %}

{% block body %}
	<legend class="govuk-fieldset__legend govuk-fieldset__legend--xl">
		<h1 class="govuk-fieldset__heading">
			{% block title %}{% lcs 'LetterTemplates.EditParagraph.TITLE' %}{% endblock %}
		</h1>
	</legend>

	<span class="govuk-hint">
		{% lcs 'LetterTemplates.EditParagraph.HINT' %}
	</span>

	<form method="post">
		<div class="app-letter-generator__container">
			<div class="app-letter-generator__controls">
				{% csrf_token %}
				<div id="standard-advice-list" class="app-sortable">
					{% for letter_paragraph in letter_paragraphs %}
						<div class="app-letter-generator__picklist-item" data-id="{{ letter_paragraph.id }}" data-text="{{ letter_paragraph.text }}">
							{% hidden_field 'letter_paragraphs' letter_paragraph.id %}
							<p class="app-letter-generator__picklist-item-text">{{ letter_paragraph.name }}</p>
							<button type="submit" name="action" value="delete.{{ letter_paragraph.id }}">
								<span class="govuk-visually-hidden">{% lcs 'LetterTemplates.EditParagraph.REMOVE_BUTTON' %}</span>
								âœ•
							</button>
						</div>
					{% endfor %}
				</div>
				<br>
				<button class="lite-button--link" type="submit" name="action" id="add_paragraph" value="add_letter_paragraph">{% lcs 'LetterTemplates.EditParagraph.ADD_LINK' %}</button>
				<br>
				<br>
				<br>
			</div>
			<div id="paragraph-list" class="govuk-body">
				{% for letter_paragraph in letter_paragraphs %}
					<p id="{{ letter_paragraph.id }}">{{ letter_paragraph.text }}</p>
				{% endfor %}
			</div>
		</div>
		<a id="done" class="govuk-button" href="{% url 'letter_templates:letter_template' letter_template.id %}">{% lcs 'LetterTemplates.EditParagraph.SAVE_BUTTON' %}</a>
	</form>
{% endblock %}

{% block javascript %}
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script src="{% static 'javascripts/letter-template-generator.js' %}"></script>
{% endblock %}
