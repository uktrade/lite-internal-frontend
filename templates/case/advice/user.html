{% extends 'layouts/base.html' %}

{% load static %}

{% block back_link %}
	<div class="govuk-breadcrumbs">
		<ol class="govuk-breadcrumbs__list">
			<li class="govuk-breadcrumbs__list-item">
				<a class="govuk-breadcrumbs__link" href="{% url 'cases:cases' %}?queue={{ queue.queue.id }}">
					{% if queue_name %}{{ queue_name }}{% else %}{% lcs 'QUEUE_ALL_CASES' %}{% endif %}
				</a>
			</li>
			<li class="govuk-breadcrumbs__list-item">
				<a class="govuk-breadcrumbs__link" href="{% url 'cases:case' case.id %}">
					{{ case.reference_code }}
				</a>
			</li>
			<li class="govuk-breadcrumbs__list-item" aria-current="page">
				{% lcs 'Cases.ApplicationPage.Actions.ADVICE' %}
			</li>
		</ol>
	</div>
{% endblock %}

{% block body %}

	{% include 'includes/messages.html' %}

	<h1 class="govuk-heading-xl">
		{% lcs 'Cases.ApplicationPage.Actions.ADVICE' %}
	</h1>

	<form method="post">

		{% csrf_token %}

		<!-- Tab bar -->
		<div style="display: grid; grid-template-columns: 1fr auto; grid-gap: 30px;">
			<div class="lite-tabs--fade">
				<div class="lite-tabs">
					<a href="{% url 'cases:user_advice_view' case.id %}" class="lite-tabs__tab lite-tabs__tab--selected" id="user_advice">User Advice</a>
                    <a href="{% url 'cases:team_advice_view' case.id %}" class="lite-tabs__tab" id="team_advice">Team Advice</a>
                    <a href="{% url 'cases:final_advice_view' case.id %}" class="lite-tabs__tab" id="final_advice">Final Advice</a>
				</div>
			</div>
            {% if not case.has_advice.my_team %}
                {% if not case.has_advice.final %}
                    {% if not status_is_terminal %}
                        <button id="button-give-advice" type="submit" class="govuk-button" data-module="govuk-button">
                            {% lcs 'GIVE_OR_CHANGE_ADVICE' %}
                        </button>
                    {% endif %}
                {% endif %}
            {% endif %}
		</div>

		<!-- Conditional error wrapper -->
        {% if case.has_advice.my_team or case.has_advice.final or status_is_terminal %}
            {% include 'case/views/advice-view.html' with show_advice=True %}
        {% else %}
            {% include 'case/views/advice-view.html' with show_checkboxes=True show_advice=True %}
        {% endif %}

	</form>

{% endblock %}

{% block javascript %}
	<script src="{% static 'javascripts/advice-view.js' %}"></script>
{% endblock %}
